var e=Promise.withResolvers.bind(Promise);let{SharedArrayBuffer:r}=globalThis;try{new SharedArrayBuffer(4,{maxByteLength:8})}catch(e){r=class extends ArrayBuffer{get growable(){return super.resizable}grow(e){super.resize(e)}}}const{isArray:t}=Array,{isView:a}=ArrayBuffer,{create:s,defineProperty:o,setPrototypeOf:i}=Object,f=(e,r=!0)=>({configurable:!0,writable:r,value:e}),l=(e,r)=>t(e)&&2===e.length&&e[0]===r,n=e=>{e.stopImmediatePropagation(),e.preventDefault()},u=(e,t)=>async()=>{const a=await t.resolved(e);return o(e,"buffer",f(i(a,r.prototype),!1)),"ok"};export{f as asDescriptorValue,s as create,o as defineProperty,t as isArray,l as isChannel,a as isView,i as setPrototypeOf,n as stop,u as waitAsync,e as withResolvers};
