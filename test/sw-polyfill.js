var e=Promise.withResolvers.bind(Promise);const{join:t}=Array.prototype,{parse:s}=JSON,[n,o]=((t=e=>e)=>{const s=new Map;let n=0;return[()=>{let o;do{o=t(n++)}while(s.has(o));const r=e();return s.set(o,r),[o,r.promise]},(e,t,n)=>{const o=s.get(e);s.delete(e),n?o?.reject(n):o?.resolve(t)}]})(),r=new BroadcastChannel("dd78209b-186c-4f83-80e9-406becb7d9f3");r.onmessage=e=>o.apply(null,e.data);const l=`${location.href}?sabayon`,a={headers:{"Content-Type":"text/plain;charset=utf-8","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"Origin"}};var i=Object.freeze({__proto__:null,activate:e=>e.waitUntil(clients.claim()),fetch:async e=>{const{request:o}=e;if(o.url===l)switch(e.stopImmediatePropagation(),e.preventDefault(),o.method){case"POST":{const[l,i]=n(),c=e=>new Response(`[${t.call(e,",")}]`,a);e.respondWith(i.then(c,c));const[d,p]=s(await o.text());r.postMessage([l,d,p]);break}case"OPTIONS":e.respondWith(new Response(null,{headers:{"Access-Control-Allow-Methods":"POST, OPTIONS","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Origin":"Origin"}}))}},install:()=>skipWaiting()});for(const e in i)addEventListener(e,i[e]);
