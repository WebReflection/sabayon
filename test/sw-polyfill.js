var e=Promise.withResolvers.bind(Promise);const{join:t}=Array.prototype,{parse:n}=JSON,[s,o]=((t=e=>e)=>{const n=new Map;let s=0;return[()=>{let o;do{o=t(s++)}while(n.has(o));const a=e();return n.set(o,a),[o,a.promise]},(e,t,s)=>{const o=n.get(e);n.delete(e),s?o?.reject(s):o?.resolve(t)}]})(),a=new BroadcastChannel("dd78209b-186c-4f83-80e9-406becb7d9f3");a.onmessage=e=>o.apply(null,e.data);const{href:r,origin:i}=location,l=`${r}?sabayon`,c=new Headers({"Content-Type":"text/plain;charset=utf-8","Access-Control-Allow-Origin":i});var p=Object.freeze({__proto__:null,activate:e=>e.waitUntil(clients.claim()),fetch:async e=>{const{request:o}=e;if("POST"===o.method&&o.url===l){e.stopImmediatePropagation(),e.preventDefault();const[r,i]=s(),l=e=>new Response(`[${t.call(e,",")}]`,c);e.respondWith(i.then(l,l));const[p,d]=n(await o.text());a.postMessage([r,p,d])}},install:()=>skipWaiting()});for(const e in p)addEventListener(e,p[e]);
