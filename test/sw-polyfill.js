const e=Promise.withResolvers.bind(Promise);const[t,n]=((t=e=>e)=>{const n=new Map;let s=0;return[()=>{let a;do{a=t(s++)}while(n.has(a));const o=e();return n.set(a,o),[a,o.promise]},(e,t,s)=>{const a=n.get(e);n.delete(e),s?a?.reject(s):a?.resolve(t)}]})(),s=new BroadcastChannel("dd78209b-186c-4f83-80e9-406becb7d9f3");s.onmessage=e=>n.apply(null,e.data);var a=Object.freeze({__proto__:null,activate:e=>e.waitUntil(clients.claim()),fetch:async e=>{const{request:n}=e;if("POST"===n.method&&n.url===`${location.href}?sabayon`){e.stopImmediatePropagation(),e.preventDefault();const[a,o]=t(),i=e=>new Response(`[${[].join.call(e,",")}]`,n.headers);e.respondWith(o.then(i,i));const[r,l]=JSON.parse(await n.text());s.postMessage([a,r,l])}},install:()=>skipWaiting()});for(const e in a)addEventListener(e,a[e]);
